(this.webpackJsonpmtg_stats=this.webpackJsonpmtg_stats||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(9),r=a.n(c),o=(a(19),a(2)),s=a(10);const m=Object(s.a)({apiKey:"AIzaSyBTzfDF8Hqxob52odaaoyUmTOhbu54jbIY",authDomain:"mtgstats-864da.firebaseapp.com",databaseURL:"https://mtgstats-864da-default-rtdb.firebaseio.com",projectId:"mtgstats-864da",storageBucket:"mtgstats-864da.appspot.com",messagingSenderId:"68211953531",appId:"1:68211953531:web:3619c6cc482a2bfeeb77de",measurementId:"G-78HCZP9LD6"}),u=Object(o.c)(m);var i=function(e){let{onGameSelect:t}=e;const[a,c]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const e=Object(o.f)(u,"games");Object(o.d)(e,e=>{const t=e.val();if(t){const e=Object.keys(t).map(e=>({id:e,gameName:t[e].gameName}));c(e)}})},[]),l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement("label",{htmlFor:"gameSelect"},"Elige un juego ya creado:"),l.a.createElement("select",{id:"gameSelect",onChange:e=>{const a=e.target.value,n=localStorage.getItem("playerID");t(a,n)}},a.map(e=>l.a.createElement("option",{key:e.id,value:e.id},e.gameName)))))};var d=function(e){let{onGameSelect:t}=e;const[a,c]=Object(n.useState)(""),[r,s]=Object(n.useState)(""),[m,d]=Object(n.useState)([]),g=Object(n.useRef)([]);return Object(n.useEffect)(()=>{const e=Object(o.f)(u,"games");Object(o.d)(e,e=>{const t=e.val();if(t){const e=Object.keys(t).map(e=>({id:e,gameName:t[e].gameName}));g.current=e,d(e)}})},[]),l.a.createElement("div",null,l.a.createElement("p",null,"\xdanete a una partida o crea una nueva"),l.a.createElement("input",{type:"text",placeholder:"Nombre de jugador",value:r,onChange:e=>s(e.target.value)}),l.a.createElement(i,{onGameSelect:(e,a)=>{const n=Object(o.f)(u,`games/${e}/players/${a}`);Object(o.d)(n,a=>{a.exists()?t(e):Object(o.g)(n,{playerName:r,life:40,counter:0}).then(()=>{alert("Jugador a\xf1adido a la partida existente")}).catch(e=>{console.error("Error al a\xf1adir jugador:",e)})})}}),l.a.createElement("input",{type:"text",placeholder:"Crear partida",value:a,onChange:e=>c(e.target.value)}),l.a.createElement("button",{onClick:async()=>{if(g.current.map(e=>e.gameName).includes(a))return alert("Error: partida ya existente MAMERTO");{const e=localStorage.getItem("playerID")||Object(o.e)(Object(o.f)(u,"games")).key;localStorage.setItem("playerID",e);const n=Object(o.e)(Object(o.f)(u,"games")),l=n.key;Object(o.g)(n,{gameName:a,players:{[e]:{playerName:r,life:40,counter:0}}}).then(()=>{alert("Partida creada"),t(l)}).catch(e=>{alert("Error: "+e.message)})}}},"Crear partida"))};var g=e=>{let{gameID:t}=e;const a=localStorage.getItem("playerID"),c=Object(o.f)(u,`games/${t}/players/${a}`),[r,s]=Object(n.useState)(""),[m,i]=Object(n.useState)(40),[d,g]=Object(n.useState)(0),b=e=>{i(e),Object(o.h)(c,{life:e})};return Object(n.useEffect)(()=>{Object(o.d)(c,e=>{const t=e.val();t?(s(t.playerName||""),i(t.life||40),g(t.counter||0)):console.log("no tenes nombre, GIL")})},[c]),l.a.createElement("div",null,l.a.createElement("h2",null,r),l.a.createElement("p",null,"Vida: ",m),l.a.createElement("p",null,"Counter: ",d),l.a.createElement("ul",{className:"lifeButtons"},l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>b(m+1)},"+1")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>b(m-1)},"-1")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>b(m+5)},"+5")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>b(m-5)},"-5"))),l.a.createElement("button",{className:"counterButton",onClick:()=>{return g(e=d+1),void Object(o.h)(c,{counter:e});var e}},"Counter"))};var b=e=>{let{opponentID:t,gameID:a}=e;const[c,r]=Object(n.useState)(40),[s,m]=Object(n.useState)(""),[i,d]=Object(n.useState)(0);return Object(n.useEffect)(()=>{if(!t||!a)return void console.warn("Missing opponentID or gameID:",{opponentID:t,gameID:a});const e=Object(o.f)(u,`games/${a}/players/${t}`);Object(o.d)(e,e=>{const t=e.val();console.log("data dentro del onvalue: ",t),t?(m(t.playerName||"SIN OPONENTES"),r(t.life||40),d(t.counter||0)):console.log("no tenes nombre, GIL"),console.log("data despues de la asignacion: ",t)})},[t,a]),l.a.createElement("div",{className:"oponente"},l.a.createElement("h2",null,s),l.a.createElement("p",null," Vida: ",c),l.a.createElement("p",null," Contador: ",i," "))};var p=function(e){let{gameID:t}=e;const[a,c]=Object(n.useState)(""),[r,s]=Object(n.useState)([]);return Object(n.useEffect)(()=>{if(t){const e=Object(o.f)(Object(o.c)());Object(o.b)(Object(o.a)(e,"games/"+t)).then(e=>{if(e.exists()){const t=e.val();c(t.gameName),t.players?(s(Object.keys(t.players)),console.log("lista de jugadores dentro de useEffect :",r)):s([])}else console.log("No data available")}).catch(e=>{console.error(e)})}},[t]),console.log("lista de jugadores fuera de useEffect :",r),l.a.createElement("div",null,l.a.createElement("h2",null,"Partida: ",a),l.a.createElement(g,{gameID:t}),l.a.createElement("ul",null,r.map(e=>l.a.createElement("li",{key:e},l.a.createElement(b,{opponentID:e,gameID:t})))))};a(20);var E=function(){const[e,t]=Object(n.useState)("");return l.a.createElement("div",null,l.a.createElement(d,{onGameSelect:e=>{t(e)}}),l.a.createElement(p,{gameID:e}))};var j=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,22)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:c,getTTFB:r}=t;a(e),n(e),l(e),c(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(E,null))),j()}},[[11,1,2]]]);
//# sourceMappingURL=main.58d6543b.chunk.js.map