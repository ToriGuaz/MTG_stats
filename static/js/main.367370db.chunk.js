(this.webpackJsonpmtg_stats=this.webpackJsonpmtg_stats||[]).push([[0],{11:function(e,a,t){e.exports=t.p+"static/media/logo.3b45b588.svg"},12:function(e,a,t){e.exports=t(22)},20:function(e,a,t){},21:function(e,a,t){},22:function(e,a,t){"use strict";t.r(a);var l=t(1),n=t.n(l),c=t(9),r=t.n(c),o=(t(20),t(2)),m=t(10);const s=Object(m.a)({apiKey:"AIzaSyBTzfDF8Hqxob52odaaoyUmTOhbu54jbIY",authDomain:"mtgstats-864da.firebaseapp.com",databaseURL:"https://mtgstats-864da-default-rtdb.firebaseio.com",projectId:"mtgstats-864da",storageBucket:"mtgstats-864da.appspot.com",messagingSenderId:"68211953531",appId:"1:68211953531:web:3619c6cc482a2bfeeb77de",measurementId:"G-78HCZP9LD6"}),i=Object(o.c)(s);var g=function(e){let{onGameSelect:a}=e;const[t,c]=Object(l.useState)(""),[r,m]=Object(l.useState)(""),[s,g]=Object(l.useState)([]),u=Object(l.useRef)([]);Object(l.useEffect)(()=>{const e=Object(o.f)(i,"games");Object(o.d)(e,e=>{const a=e.val();if(a){const e=Object.keys(a).map(e=>({id:e,gameName:a[e].gameName}));u.current=e,g(e)}});const a=localStorage.getItem("playerName");a&&m(a)},[]);const b=()=>{const e=localStorage.getItem("gameID"),a=localStorage.getItem("playerID");if(e&&a){const t=Object(o.f)(i,`games/${e}/players/${a}`);Object(o.g)(t).then(()=>{console.log("Jugador eliminado de la partida anterior");const a=Object(o.f)(i,`games/${e}/players`);Object(o.d)(a,a=>{const t=a.val();t&&0!==Object.keys(t).length||Object(o.g)(Object(o.f)(i,"games/"+e)).then(()=>console.log("Partida eliminada")).catch(e=>console.error("Error al eliminar partida:",e))})}).catch(e=>console.error("Error al eliminar jugador:",e))}};return n.a.createElement("div",{className:"landingPage"},n.a.createElement("label",null,"\xdanete o crea una partida"),n.a.createElement("input",{className:"input",type:"text",placeholder:"Nombre de jugador",value:r,onChange:e=>m(e.target.value)}),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"gameSelect"},"Elige un juego ya creado: "),n.a.createElement("select",{className:"select",id:"gameSelect",onChange:e=>(e=>{if(!r)return alert("Error: Por favor ingresa un nombre de jugador.");if(e!==localStorage.getItem("gameID")){b();const t=localStorage.getItem("playerID")||Object(o.e)(Object(o.f)(i,"games")).key;localStorage.setItem("playerID",t),localStorage.setItem("playerName",r),localStorage.setItem("gameID",e);const l=Object(o.f)(i,`games/${e}/players/${t}`);Object(o.h)(l,{playerName:r,life:40,mana:{a:0,b:0,c:0,d:0,e:0,x:0}}).then(()=>{alert("Jugador a\xf1adido a la partida existente"),a(e)}).catch(e=>{console.error("Error al a\xf1adir jugador:",e)})}})(e.target.value)},n.a.createElement("option",{value:"",disabled:!0,selected:!0},"Seleccionar partida"),s.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.gameName)))),n.a.createElement("input",{className:"input",type:"text",placeholder:"Crear partida",value:t,onChange:e=>c(e.target.value)}),n.a.createElement("button",{onClick:()=>{if(!r)return alert("Error: Por favor ingresa un nombre de jugador.");const e=u.current.map(e=>e.gameName);if(!t)return alert("Error: Por favor ingresa un nombre de partida.");if(e.includes(t))return alert("Error: partida ya existente");{b();const e=localStorage.getItem("playerID")||Object(o.e)(Object(o.f)(i,"games")).key;localStorage.setItem("playerID",e),localStorage.setItem("playerName",r);const l=Object(o.e)(Object(o.f)(i,"games")),n=l.key;localStorage.setItem("gameID",n),Object(o.h)(l,{gameName:t,players:{[e]:{playerName:r,life:40,mana:{a:0,b:0,c:0,d:0,e:0,x:0}}}}).then(()=>{alert("Partida creada"),a(n)}).catch(e=>{alert("Error: "+e.message)})}}},"Crear partida"))};var u=e=>{let{gameID:a}=e;const t=localStorage.getItem("playerID"),c=Object(o.f)(i,`games/${a}/players/${t}`),[r,m]=Object(l.useState)(""),[s,g]=Object(l.useState)(40),[u,b]=Object(l.useState)({a:0,b:0,c:0,d:0,e:0,x:0}),[d,p]=Object(l.useState)(!1),E=e=>{g(e),Object(o.i)(c,{life:e})},j=(e,a)=>{const t={...u,[e]:u[e]+a};b(t),Object(o.i)(c,{mana:t})};return Object(l.useEffect)(()=>{const e=Object(o.d)(c,e=>{const a=e.val();a&&(m(a.playerName||""),g(void 0!==a.life?a.life:40),JSON.stringify(a.mana)!==JSON.stringify(u)&&b(a.mana||{a:0,b:0,c:0,d:0,e:0,x:0}))});return()=>e()},[c,u]),n.a.createElement("div",{className:"principalPlayer"},n.a.createElement("div",{className:"infoPP"},n.a.createElement("h2",null,r),n.a.createElement("h1",null,s)),n.a.createElement("ul",{className:"lifeButtons"},n.a.createElement("li",null,n.a.createElement("button",{onClick:()=>E(s-1)},"-1")),n.a.createElement("li",null,n.a.createElement("button",{onClick:()=>E(s+1)},"+1")),n.a.createElement("li",null,n.a.createElement("button",{onClick:()=>E(s-5)},"-5")),n.a.createElement("li",null,n.a.createElement("button",{onClick:()=>E(s+5)},"+5"))),n.a.createElement("button",{className:"manaToggleButton",onClick:()=>p(!d)},"Mana"),d&&n.a.createElement("div",{className:"mana"},Object.keys(u).map(e=>n.a.createElement("div",{className:"manaContenedor",key:e},n.a.createElement("p",{className:"manaText"},e," ",u[e]),n.a.createElement("button",{className:"manaButtons",onClick:()=>j(e,-1)},"-"),n.a.createElement("button",{className:"manaButtons",onClick:()=>j(e,1)},"+")))))};var b=e=>{let{opponentID:a,gameID:t}=e;const[c,r]=Object(l.useState)(40),[m,s]=Object(l.useState)(""),[g,u]=Object(l.useState)({a:0,b:0,c:0,d:0,e:0,x:0});return Object(l.useEffect)(()=>{if(!a||!t)return void console.warn("Missing opponentID or gameID:",{opponentID:a,gameID:t});const e=Object(o.f)(i,`games/${t}/players/${a}`);Object(o.d)(e,e=>{const a=e.val();a?(s(a.playerName||"Jugador sin nombre"),r(void 0!==a.life?a.life:40),u({a:a.mana.a||0,b:a.mana.b||0,c:a.mana.c||0,d:a.mana.d||0,e:a.mana.e||0,x:a.mana.x||0})):console.log("Datos del oponente no encontrados.")})},[a,t]),n.a.createElement("div",{className:"oponente"},n.a.createElement("p",null,m),n.a.createElement("h2",null,c),n.a.createElement("ul",null,Object.entries(g).filter(e=>{let[a,t]=e;return 0!==t}).map(e=>{let[a,t]=e;return n.a.createElement("li",{className:"mana",key:a},a," ",t)})))},d=t(11),p=t.n(d);var E=function(e){let{gameID:a}=e;const[t,c]=Object(l.useState)(""),[r,m]=Object(l.useState)([]),s=localStorage.getItem("playerID");return!a&&localStorage.getItem("gameID")&&(a=localStorage.getItem("gameID")),Object(l.useEffect)(()=>{if(a){const e=Object(o.f)(Object(o.c)());Object(o.b)(Object(o.a)(e,"games/"+a)).then(e=>{if(e.exists()){const a=e.val();c(a.gameName),a.players?m(Object.keys(a.players)):m([])}else console.log("El juego no existe, eliminando gameID"),localStorage.removeItem("gameID"),c(""),m([])}).catch(e=>{console.error(e)})}},[a]),a&&s&&t?n.a.createElement("div",{className:"game"},n.a.createElement("h2",{className:"gameName"}," Partida: ",t),n.a.createElement(u,{gameID:a}),n.a.createElement("ul",{className:"listaDeOponentes"},r.filter(e=>e!==s).map(e=>n.a.createElement("li",{key:e},n.a.createElement(b,{opponentID:e,gameID:a}))))):n.a.createElement("div",{className:"game"},n.a.createElement("h2",{className:"gameName"},"Por favor, selecciona o crea una partida."),n.a.createElement("img",{className:"logo",src:p.a,alt:"Logo"}))};t(21);var j=function(){const[e,a]=Object(l.useState)(""),[t,c]=Object(l.useState)(!1);return n.a.createElement("div",null,n.a.createElement("label",{className:"hamburger"},n.a.createElement("input",{type:"checkbox",checked:t,onChange:()=>{c(e=>!e),console.log(t)}}),n.a.createElement("svg",{viewBox:"0 0 32 32"},n.a.createElement("path",{className:"line line-top-bottom",d:"M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"}),n.a.createElement("path",{className:"line",d:"M7 16 27 16"}))),t&&n.a.createElement(g,{onGameSelect:e=>{a(e),c(!1)}}),n.a.createElement(E,{gameID:e}))};var f=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,23)).then(a=>{let{getCLS:t,getFID:l,getFCP:n,getLCP:c,getTTFB:r}=a;t(e),l(e),n(e),c(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null))),f()}},[[12,1,2]]]);
//# sourceMappingURL=main.367370db.chunk.js.map